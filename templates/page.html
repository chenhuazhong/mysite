<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="{{ HOST }}static/css/main.css">
    <script src="{{ HOST }}static/js/vue.js"></script>
    <script src="{{ HOST }}static/js/axios.min.js"></script>
    <script src="{{ HOST }}static/js/jquery-1.12.4.min.js"></script>

</head>

<body style="background: #efebeb">
<div  id="app">
<div class="header" style="position: relative; z-index: 888;" >
    <a href="/user/center/"><img class="img1" src="/static/images/img.jpg" alt="图片"></a>
    <ul class="list">
        <li><a  href="{{ HOST }}">首页</a></li>
        <li><a href="{{ HOST }}music/">音乐</a></li>
        <li><a href="{{ HOST }}page/">文章</a></li>
        <li><a href="{{ HOST }}/music/lrc/">歌词</a></li>
        <!-- <li><video  src="//music.163.com/style/swf/widget.swf?sid=495819618&type=2&auto=1&width=320&height=60" controls style="float: left;"></video></li> -->
    </ul>

</div>
<!--<div style="background-image:url('http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg')-->
<!--;background-position:center; background-repeat:repeat-y ;width: 100%;height: 1000px;">-->
    <!---->
<!--</div>-->
<div>

<div style="margin: auto;height: auto;position: relative;">
    <div style="width: 1000px;height: auto;background: white;margin: auto">
        <h1 style="padding: 10px;margin-left: 20px;margin-right: 20px;border-bottom: 1px solid #d4d1d1">{{ page.p_title }}</h1>
        <div>{{ page.p_content | safe }}</div>
        <div style="width: auto;height: 500px; background: white">

            <textarea type="text" style="width: 500px;height: 100px;margin: 100px auto auto auto ;border-radius:10px ;display: block"  placeholder="写点什么。。。" v-model="comment">lailai</textarea>
            <input @click="submit" type="button" value="评论" style="text-align: center;width: 200px;height: 50px; margin: 10px auto auto auto;display: block;border: 1px solid #8fbaef;border-radius: 9px;">


        {% if comment is not None%}
            {% for foo in comment %}

            <div style="padding: 25px; background: white; border-bottom: 1px solid #d4d1d1">
                <img src="{{ HOST }}static/images/img.jpg" alt="头像" style="width: 30px;height: 30px;border-radius: 15px;" >
                <div style="display: inline ; font-size: 20px;margin-left:10px "><a href="javascript:;" style="text-decoration: none">{{ foo.username }}</a> : <span>{{ foo.p_comment }}</span></div>
                <div style="display: inline ; font-size: 14px;margin:35px 40px 0px 0px;float: right; ">{{ foo.create_time }}</div>
            {% if foo.comm is not None %}
                {% for fo in foo.comm %}

                <div style="margin: 0px 0px 0px 66px"><p style="font-size:14px ;"><a style="font-size: 14px;" href="">{{ fo.username }}</a> 回复@{{ foo.username }} : {{ fo.p_comment }}</p></div>
                {% endfor %}

            {% endif %}

            </div>
            {% endfor %}
          {% endif %}
        <div style="width: 100%;height: 300px;background: white"></div>
        </div>
</div>

</div>

</div>



<div v-show="is_show" style="display:none;position: relative;z-index: 118 ">
<div @click="is_show=false" style="position: fixed ;opacity:0.5;top: 0px;left: 0px;;background: #bbbaba; width: 100%;height: 100%;">

        </div>
    <div style=";width: 300px;height: 200px;position: fixed;top: 50%;left: 50%;margin: 0px ;">
    <div style="background: white;width: 300px;height: 200px;position: absolute;top: -100px;left: -150px;margin: 0px;z-index: 999; ;"></div>
        </div>
</div>

<div style="width: 100%;height: 80px;background: #060606;margin-top:8px;padding-top:4px;position: fixed;bottom: 0px; left: 0px;">
    <div style="margin-left: 50px;">
    <div style="color: white">QQ : 571912102</div>
    <div style="color: white">csdn : <a target="_blank"  style="text-decoration: none" href="https://me.csdn.net/p571912102">csdn个人主页</a></div>

    <div style="color: white">github : <a target="_blank" style="text-decoration: none" href="https://github.com/chenhuazhong">github主页</a></div>
    </div>
    <div><img @click="" style="position: absolute;left: 220px;top:0px;width: 100px;height: 100px;" src="{{ HOST }}static/images/571912102.jpg" alt="qq二维码"></div>

</div>
<div style="width: 100%;height: 80px;background: #060606;margin-top:8px;padding-top:4px;position: fixed;bottom: 0px; left: 0px;">
    <div style="margin-left: 50px;">
    <div style="color: white">QQ : 571912102</div>
    <div style="color: white">csdn : <a target="_blank"  style="text-decoration: none" href="https://me.csdn.net/p571912102">csdn个人主页</a></div>

    <div style="color: white">github : <a target="_blank" style="text-decoration: none" href="https://github.com/chenhuazhong">github主页</a></div>
    </div>
    <div><img @click="" style="position: absolute;left: 220px;top:0px;width: 100px;height: 100px;" src="{{ HOST }}static/images/571912102.jpg" alt="qq二维码"></div>

</div>

</div>
</body>
<script>
    var  vm = new Vue({
        el:'#app',
        data:{
            is_show: false,
            comment:'',
            pk:{{ page.id }}
        },
        methods:{
            show:function () {
                vm.is_show = true

            },
            submit:function () {
                axios.post('{{ HOST }}page/' + vm.pk + '/comment/',{
                    'comment':vm.comment
                },
                    {
                    responseType: 'json',
                    withCredentials: true
                }).then(function (response) {
                    location.reload([true])
                })

            }
        }
    })
</script>
</html>